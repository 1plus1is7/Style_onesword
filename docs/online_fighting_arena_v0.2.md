# 온라인 격투 아레나(프로토타입) – Codex 전달용 기획서 v0.2

## 0) 비전 & 스코프
- 장르: 온라인 전용, 쿼터뷰(45°) 픽셀 격투 아레나
- 핵심: 빠른 **연속기 중심 기본기** + **완전 개방형 조립식 스킬** (피지컬로 카운터 가능)
- 매치: **단판**(평균 3~5분), 1vs1 필수 / 2v2·3v3·FFA는 후순위
- 보상: 승/패 기록, 레벨(지표용) — 코스메틱은 범위 밖

## 1) 엔진 / 언어 (확정)
- **클라이언트**: Godot 4.x (**GDScript**) / 2D 픽셀·쿼터뷰
- **서버**: Node.js (**TypeScript**) / 웹소켓 기반, 서버 권위 시뮬
- **DB**: SQLite(프로토타입), 차후 PostgreSQL 고려
- **공유 데이터**: 전투 규칙·프레임·무기/스킬 정의는 JSON으로 **클라·서버 공용**

## 2) 화면 / 카메라 / 비주얼
- 카메라: 고정 쿼터뷰(45°), 내부 16:9 픽셀 해상도(정수 배 확대)
- 아레나: 소규모 정사각 맵 1개(프로토타입), 장애물 없음
- 비주얼: 추상적 배경(그리드/파동), 캐릭터는 단순 실루엣 + 무기
- 피드백: 히트스파크, 패링 섬광, 대시 트레일(도형 중심)

## 3) 입력 & 컨트롤(PC)
- 이동 8방, 약공/강공, 가드/패링(짧은 창), 회피 대시(짧은 무적)
- 스킬 슬롯 2개(버튼 발동), 입력 버퍼 3프레임
- 패드 지원은 선택(후순위)

## 4) 전투 시스템(연속기 중심)
### 4.1 기본기
- 약공격: 빠른 시동, 3연타 체인
- 강공격: 느리지만 높은 경직/대미지(마무리 역할)
- 점프 공격: 시동/연결 포인트
- 캔슬 규칙: 약→약→강, 약→대시캔슬→약/강, 공중 약→지상 약(히트 시)

### 4.2 방어/회피
- 가드: 전방 방어, 가드게이지 소모(0이면 가드 크래시)
- 패링: 짧은 유효 프레임, 성공 시 상대 큰 경직 + 반격 기회
- 회피 대시: 짧은 무적, 쿨다운 존재

### 4.3 밸런스 목표(한 판 3~5분)
- 체력: 평균 콤보 15~20% 소진, 숙련 콤보 30~40% 소진
- 회복 없음(패링 성공 시 스태미너 회복 등 **리스크/리턴**만)
- 히트스톱 소량(타격감 강조, 판정 가독)

## 5) 스킬 시스템(완전 개방형, 조립식)
- 구조: **트리거(발동 조건) + 액션(동작) + 수정자(속성/효과)**
- 프로토타입 파츠(각 2~3종):  
  - 트리거: 버튼, 공중 상태  
  - 액션: 근접 베기, 직선 투사체, 돌진  
  - 수정자: 화염/냉기/번개, 범위 증가, 쿨타임 감소
- 장착: 스킬 슬롯 2개
- 밸런스: 파츠별 코스트 합산으로 쿨타임/발동 지연/자원 소모 증가(강력 조합 = 높은 리스크)

## 6) 무기
- 프로토타입: **검(기본)**, **창(옵션)**
- 차이:  
  - 검 — 짧은 리치, 빠른 연속기/대시캔슬 유리  
  - 창 — 긴 리치, 시동 느리나 판정 크고 견제 우수
- 무기별 기본기 프레임/리치/가드백 차별화(데이터로 관리)

## 7) 매치 구조(온라인 전용)
- 한 판 = **단판(최대 5분)**  
- 모드: 빠른 대전(1vs1), 커스텀 방(친구 초대)
- 플로우: 매치메이킹 → 로드아웃 설정(무기1·스킬2 / 20초) → 전투(≤5분) → 결과(승패, EXP/레벨)

## 8) 온라인 아키텍처
- 모델: **서버 권위 + 클라 예측(스냅샷 보정)**, 60틱 시뮬
- 매치메이킹 서버: 대기열/레벨 기반 근사 매칭(정교 MMR은 후순위)
- 게임 서버: 룸 생성/시뮬/종료, 입력 수집→판정→스냅샷 전송
- 지연 허용: 80~120ms, 보정으로 플레이 유지
- 치트 최소화: 서버 판정 우선, 입력 로그/스냅샷 저장, 클라 계산 무시

## 9) AI 봇(연습 모드)
- FSM: Idle → 접근 → 공격 → 후퇴 → 방어
- 의사결정: 거리/쿨타임 기반, 확률적 가드/패링
- 난이도: Easy/Normal/Hard(반응 프레임·확률로만 조절)

## 10) 계정/기록(프로토타입 범위)
- 유저: 아이디/이름/레벨/경험치
- 경기 기록: 승/패, 준 대미지/받은 대미지, 매치 길이
- 통계: 승률, 최근 10판

## 11) UI 플로우
- 타이틀 → **퀵매치 / 커스텀 / 연습(AI)**
- 로드아웃: 무기 1 + 스킬 2 선택(간단 UI)
- HUD: HP/스태미너/가드게이지/스킬 쿨타임
- 결과: 승패, 데미지 통계, 경험치/레벨

## 12) 마일스톤(4주)
- **W1**: 이동/공격/가드/패링/대시, HP UI, 히트박스·허트박스
- **W2**: 스킬 조립 UI(간단), 쿨타임·코스트 적용, AI 봇(Easy/Normal)
- **W3**: 온라인 1vs1(룸/입력 동기/스냅샷 보정), 결과/레벨 반영
- **W4**: 밸런스 1차(3~5분 단판), 버그픽스, 안정 빌드

## 13) 완성 기준(Definition of Done)
- 온라인 1vs1 단판이 **3~5분** 안정적으로 동작
- 연속기(약→약→강), 대시캔슬, 패링이 프레임 단위로 정상
- 스킬 조립(트리거·액션·수정자) **최소 8개 조합** 정상 발동/쿨다운
- 승/패 기록·레벨 정상 반영(DB)
- 지연 120ms 환경에서도 게임 파괴적 오류 없이 플레이 가능
